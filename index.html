<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Australian Domestic Flight Analysis | FIT3179 Week 10</title>
    
    <!-- Vega-Lite Â∫ì -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #2c3e50;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 5px;
        }
        
        .header .metadata {
            font-size: 0.95em;
            opacity: 0.85;
            margin-top: 15px;
            font-style: italic;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }
        
        .section-description {
            font-size: 1.1em;
            color: #555;
            line-height: 1.6;
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }
        
        .vis-container {
            background: #fafafa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            min-height: 400px;
        }
        
        .info-box {
            background: #e8f4f8;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid #3498db;
        }
        
        .info-box h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .info-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-box li {
            padding: 10px 0;
            color: #555;
            line-height: 1.7;
            font-size: 1.05em;
        }
        
        .info-box li:before {
            content: "‚úàÔ∏è ";
            margin-right: 10px;
        }
        
        .footer {
            background: #34495e;
            color: white;
            text-align: center;
            padding: 30px;
        }
        
        .footer p {
            margin: 8px 0;
            font-size: 0.95em;
        }
        
        .footer a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(to right, transparent, #3498db, transparent);
            margin: 40px 0;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
        
        .error {
            color: #e74c3c;
            padding: 20px;
            background: #fadbd8;
            border-radius: 5px;
            border-left: 4px solid #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>‚úàÔ∏è Australian Domestic Flight Analysis</h1>
            <p>Interactive Visualization of Flight Networks & Route Rankings</p>
            <div class="metadata">
                FIT3179 Week 10 Homework | Data Visualization 2
            </div>
        </div>
        
        <!-- Content -->
        <div class="content">
            
            <!-- Visualization 1: Flight Network Map -->
            <div class="section">
                <h2 class="section-title">üìç Visualization 1: Flight Network Map</h2>
                <div class="section-description">
                    This interactive map visualizes the Australian domestic flight network from 1984 to 2019. 
                    The width of each line represents passenger volume, while the color indicates the load factor 
                    (seat occupancy rate). Use the year slider to explore how the network evolved over 35 years.
                    Hover over routes to see detailed statistics.
                </div>
                <div class="vis-container">
                    <div id="vis1">
                        <div class="loading">Loading visualization...</div>
                    </div>
                </div>
            </div>
            
            <div class="divider"></div>
            
            <!-- Visualization 2: Top 10 Routes -->
            <div class="section">
                <h2 class="section-title">üèÜ Visualization 2: Top 10 Busiest Routes</h2>
                <div class="section-description">
                    This geographic visualization highlights only the Top 10 busiest domestic routes with numbered rankings 
                    displayed on each route. The line thickness represents passenger volume, and colors show load factor 
                    efficiency. Drag the year slider to observe how route rankings shifted over time, revealing changes 
                    in Australia's aviation market structure.
                </div>
                <div class="vis-container">
                    <div id="vis2">
                        <div class="loading">Loading visualization...</div>
                    </div>
                </div>
            </div>
            
            <!-- Key Insights -->
            <div class="info-box">
                <h3>üîç Key Insights</h3>
                <ul>
                    <li><strong>Sydney-Melbourne corridor</strong> has consistently dominated as the busiest route since 1984, often carrying over 1 million passengers annually</li>
                    <li><strong>Passenger volumes</strong> have grown dramatically - from ~500K in 1984 to over 1.5M by 2019 on major routes</li>
                    <li><strong>Load factors</strong> improved significantly from ~70% to 85%+, indicating airlines became more efficient at filling seats</li>
                    <li><strong>Eastern seaboard</strong> (Sydney-Melbourne-Brisbane triangle) dominates with the highest passenger traffic and frequency</li>
                    <li><strong>Network expansion</strong> is visible through growth in connections to regional airports like Cairns, Gold Coast, and Townsville</li>
                    <li><strong>Perth routes</strong> show increasing importance, reflecting Western Australia's economic growth and isolation from the eastern states</li>
                </ul>
            </div>
            
            <!-- How to Use -->
            <div class="info-box" style="background: #fff3cd; border-left-color: #ffc107;">
                <h3>üìä How to Use These Visualizations</h3>
                <ul>
                    <li><strong>Year Slider:</strong> Drag to explore data from 1984 to 2019 and observe network evolution over 35 years</li>
                    <li><strong>Tooltips:</strong> Hover over any route to see detailed statistics including passenger counts, rankings, load factors, and distances</li>
                    <li><strong>Route Rankings:</strong> In Visualization 2, numbers on routes indicate Top 10 ranking - thicker lines represent busier routes</li>
                    <li><strong>Color Coding:</strong> Darker/warmer colors indicate higher load factors (better seat utilization and operational efficiency)</li>
                    <li><strong>Interactive Features:</strong> Routes highlight on hover for easier identification and comparison</li>
                </ul>
            </div>
            
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p><strong>Data Source:</strong> <a href="https://data.gov.au" target="_blank">Australian Government Open Data Portal</a></p>
            <p><strong>Dataset:</strong> Domestic Aviation Activity - City Pairs (1984-2019)</p>
            <p><strong>Author:</strong> Bureau of Infrastructure and Transport Research Economics (BITRE)</p>
            <p><strong>Visualization Framework:</strong> Vega-Lite v5 | <strong>Course:</strong> FIT3179 Data Visualization</p>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                Created for Data Visualization 2 Assignment | Monash University
            </p>
        </div>
    </div>

    <!-- Embed Visualizations -->
    <script type="text/javascript">
        // Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢ÁöÑÂÆåÊï¥Ë∑ØÂæÑ
        function getBasePath() {
            const path = window.location.pathname;
            const dir = path.substring(0, path.lastIndexOf('/') + 1);
            return window.location.origin + dir;
        }
        
        // Â∞ùËØïÂ§öÁßçË∑ØÂæÑÊñπÂºèÂä†ËΩΩ
        function loadVisualization(elementId, filename, visualizationName) {
            const paths = [
                // ÊñπÂºè1: Áõ∏ÂØπË∑ØÂæÑ
                './' + filename,
                // ÊñπÂºè2: ÁªùÂØπË∑ØÂæÑ
                getBasePath() + filename,
                // ÊñπÂºè3: GitHub raw (Â§áÁî®)
                'https://raw.githubusercontent.com/siyuanliao12137/Data-visualisation2/main/' + filename
            ];
            
            let currentPathIndex = 0;
            
            function tryLoad() {
                if (currentPathIndex >= paths.length) {
                    document.getElementById(elementId).innerHTML = 
                        '<div class="error">‚ùå Failed to load ' + filename + 
                        '<br><br>Please check that the file exists in the repository.</div>';
                    return;
                }
                
                const currentPath = paths[currentPathIndex];
                console.log(`Trying to load ${filename} from: ${currentPath}`);
                
                vegaEmbed('#' + elementId, currentPath, {
                    "actions": {
                        "export": true,
                        "source": false,
                        "editor": false
                    }
                }).then(function(result) {
                    console.log(`‚úÖ ${visualizationName} loaded successfully from: ${currentPath}`);
                }).catch(function(error) {
                    console.warn(`‚ùå Failed to load from ${currentPath}:`, error.message);
                    currentPathIndex++;
                    tryLoad();
                });
            }
            
            tryLoad();
        }
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÊâßË°å
        window.addEventListener('DOMContentLoaded', function() {
            loadVisualization('vis1', 'flight_map.json', 'Flight Network Map');
            loadVisualization('vis2', 'Top10.json', 'Top 10 Routes');
        });
    </script>
</body>
</html>